<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, maximum-scale=1">
    <title>Zing-Face</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <link href="/zing_styles/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="/zing_styles/style.css" rel="stylesheet" type="text/css">
    <link href="/zing_styles/linecons.css" rel="stylesheet" type="text/css">
    <link href="/zing_styles/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="/zing_styles/responsive.css" rel="stylesheet" type="text/css">
    <link href="/zing_styles/animate.css" rel="stylesheet" type="text/css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,900,700,700italic,400italic,300italic,300,100italic,100,900italic'
          rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Dosis:400,500,700,800,600,300,200' rel='stylesheet'
          type='text/css'>

    <!-- =======================================================
    Theme Name: Butterfly
    Theme URL: https://bootstrapmade.com/butterfly-free-bootstrap-theme/
    Author: BootstrapMade
    Author URL: https://bootstrapmade.com
    ======================================================= -->

    <!-- <script type="text/javascript" src="js/jquery.1.8.3.min.js"></script> -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="/zing_js/bootstrap.js"></script>
    <script type="text/javascript" src="/zing_js/jquery-scrolltofixed.js"></script>
    <script type="text/javascript" src="/zing_js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="/zing_js/jquery.isotope.js"></script>
    <script type="text/javascript" src="/zing_js/wow.js"></script>
    <script type="text/javascript" src="/zing_js/classie.js"></script>


    <script type="text/javascript">
        $(document).ready(function (e) {
            $('.res-nav_click').click(function () {
                $('ul.toggle').slideToggle(600)
            });

            $(document).ready(function () {
                $(window).bind('scroll', function () {
                    if ($(window).scrollTop() > 0) {
                        $('#header_outer').addClass('fixed');
                    } else {
                        $('#header_outer').removeClass('fixed');
                    }
                });

            });


        });

        function resizeText() {
            var preferredWidth = 767;
            var displayWidth = window.innerWidth;
            var percentage = displayWidth / preferredWidth;
            var fontsizetitle = 25;
            var newFontSizeTitle = Math.floor(fontsizetitle * percentage);
            $(".divclass").css("font-size", newFontSizeTitle)
        }
    </script>
</head>

<body>

<!--Header_section-->
<header id="header_outer">
    <div class="container">
        <div class="header_section">
            <div class="logo"><a href="javascript:void(0)"><img src="img/logozing.png" alt="" width="120px"></a></div>
            <div class="nav" id="nav">

                <ul class="toggle">
                    <li><a href="#top_content">Home</a></li>
                    <li><a href="#service">Services</a></li>
                    <li><a href="#work_outer"></a></li>
                    <li><a href="#Portfolio"></a></li>
                    <li><a href="#client_outer"></a></li>
                    <li><a href="#team"></a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
                <ul class="">
                    <li><a href="#top_content">Home</a></li>
                    <li><a href="#service">Services</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>

            </div>
            <a class="res-nav_click animated wobble wow" href="javascript:void(0)"><i class="fa-bars"></i></a></div>
    </div>
</header>
<!--Header_section-->

<!--Top_content-->
<section id="top_content" class="top_cont_outer">
    <div>
        <div class="container">
            <div class="top_content">
                <div class="row">
                    <div class="col-lg-3 col-sm-4">
                        <div class="top_left_cont flipInY wow animated">
                            <!-- <h3>Zing!Face</h3> -->
                            <h2 style="margin-bottom: 0">Hi! </h2>
                            <h2><span id="recoged_name_elem" style="color:chocolate;font-size: 60px">there</span></h2>
                            <!--<p> Accusantium quam, aliquam ultricies eget tempor id, aliquam eget nibh et. Maecen aliquam, risus at semper. Proin iaculis purus consequat sem cure digni ssim. Donec porttitora entum. </p>-->


                            <div id="book_info">Please scan a book</div>
                            <div id="book_id" style="display:hidden"></div>
                            <a href="#service" class="learn_more2">Learn more</a></div>
                    </div>
                    <div class="col-lg-9 col-sm-8">
                            <!-- <div class="center-content page-container"> -->
                            
                    <div class="col s6">
                        <div class="card">
                            <div class="card-content center-align" style="margin-left: 150px;">
                                <video id="video" width="600" height="450" autoplay style="display:none"></video>
                                <canvas id="canvas" width="600" height="450" class="hide"></canvas>
                                <!-- <button type="button" class="btn" id="start-stream" style="margin-bottom: 10px">Start Face Detection</button> -->
                                <canvas id="detect-data" width="600" height="450"></canvas>
                            </div>
                        </div>
                    </div>
                                
                        <!--
                        <video autoplay="" muted="" playsinline="" style="border-radius: 5px; width:100%"></video>

                        <script async="" src="./js/main.js"></script>

                        <div class="select">
                            <label for="audioSource">Audio source: </label><select id="audioSource">
                            <option value="default">Default - Microphone Array (Realtek Audio)</option>
                            <option value="communications">Communications - Microphone Array (Realtek Audio)</option>
                            <option value="87c08a4480ad3fb971550af172815b216f76d05fd0982009231010503e1231f2">Microphone
                                Array (Realtek Audio)
                            </option>
                        </select>
                        </div>

                        <div class="select">
                            <label for="videoSource">Video source: </label><select id="videoSource">
                            <option value="d080f6126e231632db8c0a8f490c7e2f6f5396b269fcf10bf36353db2de124bb"></option>
                        </select>                        
                        </div>
                        -->                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--Top_content-->

<!--Service-->
<section id="service">
    <div class="container">
        <!--<h2>Services</h2>-->
        <div class="service_area">
            <div class="row">
                <div class="col-lg-3">
                    <div class="service_block">
                        <div class="service_icon delay-03s animated wow zoomIn">
                            <span><a href="javascript:void(0)" onclick="$.zingLib.borrow()"><i class="fa-book" href=""></i></a></span>
                        </div>
                        <!--<h3 class="animated fadeInUp wow">Quick TurnAround</h3>-->
                        <h3>Borrow</h3>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="service_block">
                        <div class="service_icon icon2  delay-03s animated wow zoomIn"><span><i class="fa-book"></i></span>
                        </div>
                        <h3>Return</h3>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="service_block">
                        <div class="service_icon icon3  delay-03s animated wow zoomIn"><span><i
                                class="fa-recycle"></i></span></div>
                        <h3>Share</h3>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="service_block">
                        <div class="service_icon icon4  delay-03s animated wow zoomIn">
                            <span><a href="/details"><i
                                class="fa-search"></i></a></span>
                        </div>
                        <h3>Search</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- <section>
        <div class="side-by-side" >
              <div class="select">
                <label for="videoSource">Video source: </label>
                <select id="videoSource" style="display: block;">
                  <option value="d080f6126e231632db8c0a8f490c7e2f6f5396b269fcf10bf36353db2de124bb"></option>
                </select>
              </div>     
        </div>       
                </section> -->
<!--Service-->

<!--twitter-feed-end-->
<footer class="footer_section" id="contact">

</footer>
<script type="text/javascript">
    $(document).ready(function (e) {
        $('#header_outer').scrollToFixed();
        $('.res-nav_click').click(function () {
            $('.main-nav').slideToggle();
            return false

        });

    });
</script>
<script>
    // wow = new WOW({
    //     animateClass: 'animated',
    //     offset: 100
    // });
    // wow.init();
    // document.getElementById('').onclick = function () {
    //     var section = document.createElement('section');
    //     section.className = 'wow fadeInDown';
    //     section.className = 'wow shake';
    //     section.className = 'wow zoomIn';
    //     section.className = 'wow lightSpeedIn';
    //     this.parentNode.insertBefore(section, this);
    // };
</script>
<!-- <script type="text/javascript">
    $(window).load(function () {

        $('a').bind('click', function (event) {
            var $anchor = $(this);

            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top - 91
            }, 1500, 'easeInOutExpo');
            /*
            if you don't want to use the easing effects:
            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top
            }, 1000);
            */
            event.preventDefault();
        });
    })
</script> -->

<script type="text/javascript">
    jQuery(document).ready(function ($) {
        // Portfolio Isotope
        var container = $('#portfolio-wrap');


        container.isotope({
            animationEngine: 'best-available',
            animationOptions: {
                duration: 200,
                queue: false
            },
            layoutMode: 'fitRows'
        });

        $('#filters a').click(function () {
            $('#filters a').removeClass('active');
            $(this).addClass('active');
            var selector = $(this).attr('data-filter');
            container.isotope({
                filter: selector
            });
            setProjects();
            return false;
        });


        function splitColumns() {
            var winWidth = $(window).width(),
                columnNumb = 1;


            if (winWidth > 1024) {
                columnNumb = 4;
            } else if (winWidth > 900) {
                columnNumb = 2;
            } else if (winWidth > 479) {
                columnNumb = 2;
            } else if (winWidth < 479) {
                columnNumb = 1;
            }

            return columnNumb;
        }

        function setColumns() {
            var winWidth = $(window).width(),
                columnNumb = splitColumns(),
                postWidth = Math.floor(winWidth / columnNumb);

            container.find('.portfolio-item').each(function () {
                $(this).css({
                    width: postWidth + 'px'
                });
            });
        }

        function setProjects() {
            setColumns();
            container.isotope('reLayout');
        }

        container.imagesLoaded(function () {
            setColumns();
        });


        $(window).bind('resize', function () {
            setProjects();
        });

    });
    $(window).load(function () {
        jQuery('#all').click();
        return false;
    });
</script>
<!--<script src="contactform/contactform.js"></script>-->

<!--face reg-->

<script type="text/javascript" src="/zing_js/zing_index.js"></script>

<script type="text/javascript">
    var socket = new WebSocket('ws://10.133.144.220:8001/websocket');
    $(document).ready(function () {
        let video = document.getElementById('video');
        let canvas = document.getElementById('canvas');
        let context = canvas.getContext('2d');
        let draw_canvas = document.getElementById('detect-data');
        let draw_context = draw_canvas.getContext('2d');
        let image = new Image();
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({video: true}).then(function (stream) {
                video.srcObject = stream;
                video.play();
            });
        }
        function drawCanvas() {
            context.drawImage(video, 0, 0, 600, 450);
            sendMessage(canvas.toDataURL('image/png'));
        }
        // document.getElementById("start-stream").addEventListener("click", function () {
            // drawCanvas();
        // });
        function sendMessage(message) {
            socket.send(message);
        }

        const getImageInfo = (data) => {
            let idx = data.indexOf("|");
            const name = data.substr(0, idx);
            const imgData = data.substr(idx+1);
            return {
                name, imgData
            }
        };
        socket.onmessage = function (e) {
            image.onload = function () {
                draw_context.drawImage(image, 0, 0, 600, 450);
            };
            const {name, imgData} = getImageInfo(e.data);
            image.src = imgData;
            document.querySelector("#recoged_name_elem").innerHTML = name;
            drawCanvas();
        };

        // setTimeout(() => drawCanvas(), 1000)
    })
</script>
</body>
</html>
